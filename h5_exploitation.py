# -*- coding: utf-8 -*-
"""Formating data from first experiment.
Conditions:
* 8 minutes lying down in bed with eyes closed
* 4 two-minutes sessions:Â silence, monaural 1f 247Hz,
monaural 2f 240Hz + 254 Hz, binaural 240 Hz + 254 Hz.

Hypothesis of ear symetry in binaural beats.
"""

import h5py
import numpy as np
from matplotlib import pyplot as plt

f = h5py.File("acquisition_1.h5", "r")

fs = 250

f1 = f[u'channel2'][u'filtered']

f2 = f[u'channel4'][u'filtered']

sec = 20
x_lims = [51000+8*250*60-sec*250, 51000+8*250*60+sec*250]

"""
plt.figure(1)
plt.plot(f1)
plt.ylim([-50, 50])
plt.xlim([60000, 70000])
plt.show()
"""
plt.figure(2)
plt.plot(f2)
plt.ylim([-50, 50])
plt.title("EEG signal")
plt.xlim(x_lims)
plt.show()


# Ok let's use channel 4
# Now look at the accelerometer
acc_x = np.array(f[u'accelerometer'][u'x'])
acc_y = np.array(f[u'accelerometer'][u'y'])
acc_z = np.array(f[u'accelerometer'][u'z'])

movement = np.sqrt(acc_x**2 + acc_y**2 + acc_z**2)
mvt_grad = np.gradient(movement)

plt.figure(3)
plt.plot(acc_x)
plt.title("acc_x")
plt.ylim([-5, 5])
plt.xlim([x_lims[0]/5, x_lims[1]/5])
plt.show()

"""
plt.figure(4)
plt.plot(acc_y)
plt.ylim([-5, 5])
plt.xlim([9500, 11000])
plt.show()

plt.figure(5)
plt.plot(acc_z)
plt.ylim([-5, 5])
plt.xlim([9500, 11000])
plt.show()
"""

